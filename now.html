<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Now - Sophie Davis</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">

  <link href="https://api.fontshare.com/v2/css?f[]=general-sans@300,400,500&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Pill Navigation -->
  <nav class="pill-nav">
    <a href="index.html" class="nav-item">About</a>
    <a href="now.html" class="nav-item active live">Now</a>
    <a href="media.html" class="nav-item">Media</a>
    <a href="contact.html" class="nav-item">Contact</a>
  </nav>

  <main>
    <!-- Page Header -->
    <section class="page-header now-header">
      <p class="now-intro">This page is a simple view of what I'm up to right now. Inspired by <a href="https://harper.blog/now/" target="_blank" rel="noopener">Harper</a>, who was inspired by <a href="https://nownownow.com" target="_blank" rel="noopener">nownownow.com</a>, and so on.</p>
      <h1 class="now-date" id="last-updated"></h1>
    </section>

    <!-- Microblog Posts -->
    <section class="now-content" id="microblog-posts">
      <div class="now-section loading">Loading...</div>
    </section>
  </main>

  <script>
    async function loadMicroblog() {
      try {
        const res = await fetch('data/microblog.json');
        const data = await res.json();
        const container = document.getElementById('microblog-posts');
        const lastUpdated = document.getElementById('last-updated');

        if (data.posts && data.posts.length > 0) {
          // Show last updated date
          const latestDate = new Date(data.posts[0].date);
          lastUpdated.textContent = `Now @ ${latestDate.toLocaleDateString('en-US', {
            month: 'long',
            day: 'numeric',
            year: 'numeric'
          })}`;

          // Render posts (skip title since date is in header)
          container.innerHTML = data.posts.map(post => `
            <article class="microblog-post">
              <div class="post-content">${post.content}</div>
            </article>
          `).join('');
        } else {
          container.innerHTML = '<p class="empty-state">Nothing yet</p>';
        }
      } catch (e) {
        console.error('Failed to load microblog:', e);
        document.getElementById('microblog-posts').innerHTML = '<p class="empty-state">Could not load posts</p>';
      }
    }

    loadMicroblog();
  </script>
</body>
</html>
